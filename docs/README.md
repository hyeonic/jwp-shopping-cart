# 장바구니 - 협업 미션

## 페어 규칙

- 교대 시간은 10분으로 지정한다.
- github과 본인 장비를 활용하여 진행한다.
- 커밋 메시지는 한글로
- 테스트 메서드명은 영어로 하고 DisplayName 을 한글로
- 일일회고를 진행한다. (목표를 잘 지키며 개발했는지 이야기 나누기)

## 목표

### 공통

- 프론트와 협업을 하며 API 를 작성할때 어떤 부분을 중심적으로 논의해야 할지 고민하고, 기록해두기
- 항상 의식적으로 근거를 가지고 코드 짜기

### 매트

- 현재 알고 있는 Spring MVC에 대한 구조를 다시 한 번 인지하며 해당 기술을 적절히 활용하기
- 처음부터 너무 과하게 설계하지 않기
- MVC 를 다시 한번 공부하며 페어의 이해를 돕기 위해 노력하기

### 야호

- ATDD 를 중심으로 개발하기
- auth 에 대한 대략적인 흐름을 파악해보기

## 🚀 1단계 - 회원 기능

### 기능 목록

[링크](https://www.notion.so/0f0d2f9b1c4b4f6cb02b0f7215f8cccc)

- 회원가입
    - [x] 모든 필드는 null이 될 수 없다.
    - [x] 이메일 형식에 대한 검증 (test@test.com)
    - [x] 비밀번호는 10자에서 20자 사이
    - [x] 전화번호 형식에 대한 검증 (000-0000-0000)
- [x] 회원 정보 조회
- [x] 로그인
- 회원 정보 수정
    - [x] 모든 필드는 null이 될 수 없다.
    - [x] 전화번호 형식에 대한 검증 (000-0000-0000)
- [x] 회원 탈퇴

- Customer
  - username
  - email
  - password
  - address
  - phoneNumber

## 🚀 2단계 - 장바구니/주문 API 변경하기

- [x] 장바구니, 주문과 관련된 기존 코드를 파악한다.
- [x] 기존 로직을 리팩토링한다.
- [x] 토큰을 기반으로 현재 사용자를 확인한 뒤 요청을 처리한다.

### TODO

- [x] 생성자의 매개변수에 동일한 타입이 존재하는 경우 `빌더 패턴 고려 vs 원시값 포장`
- [x] 원시값 포장
- [x] 동작하는 코드를 우선적으로 개발하기
- [x] customer 생성 및 수정에 관한 validation 추가
- [x] test fixture 만들기
- [ ] id 기반으로 payload 저장
- [x] token validate 추가
- [ ] BindingResult에 Error가 복수 개인 경우 어떻게 보여지게 할지 고민

### 일정

#### 05/29

- [x] 회원가입
- [x] 로그인

#### 05/30

- [x] 로그인
- [x] 회원 정보 조회
- [x] 회원 정보 수정
- [x] 회원 정보 삭제

#### 05/31
 - [x] jjwt 버전 변경
 - [x] token validate 추가
 - 도메인 검증 추가
   - [x] username
     - username은 `유일`하다.
     - `5`이상 `20`이하 여야 한다.
     - `영문 소문자`, `숫자`와 `특수기호(_), (-)`만 사용 가능하다.
   - [x] email
     - 형식은 `example@email.com`
     - `@`이전에는 `영문 소문자`, `숫자`와 `특수기호(_), (-), (.)`만 사용 가능하다.
     - `@`이후에는 영문 소문자로만 이루어져야 한다.
     - `.`이후에는 영문 소문자 `2~3`글자로 이루어져야 한다.
   - [x] address
     - 길이가 `0 ~ 255` 여야 한다.
   - [x] phoneNumber
     - `010`으로 시작해야 한다.
     - 형식은 `010-0000-0000`이여야 한다.
     - `숫자`만 가능하다.
 - [x] dto validation 추가

## 일일 회고

### 2022-05-29

#### 느낀점

- `매트`: 처음으로 3명 이상의 사람들과 프로젝트를 진행하는 것이기 때문에 설레는 마음과 동시에 어떻게 유연하게 협업할 수 있을지 많은 고민을 하게된 시간이었다.
- `야호`: 프론트와 함께하는 협업이라서 어떤 부분을 고려해야 하는지 감이 잡히지 않았는데, 백엔드끼리 이야기를 하면서 조금 감이 잡힌 것 같다. 고민한 내용을 토대로 프론트와 이야기 해보고 싶다.

#### 페어에게 좋았던 점

- `매트`: 새롭게 시도하는 다양한 협업 방식에 빠르게 적용하며 진행할 수 있어서 좋았다. 또한 꼼꼼한 성격탓에 사소한 부분 까지 고려하고 넘어갈 수 있었다.
- `야호`: 평소 한번 집중을 하면 너무 과하게 시간을 보내는 경우가 많았는데, 매트가 적당한 시간에 휴식을 취할 수 있도록 해줘서 좋았다. 또 현재 집중해야 하는 부분에 가중치를 두고 개발할 수 있어서 좋았다.

#### 아쉬웠던 점

- `매트`: 중요하지 않은 부분에서 너무 많은 시간을 쏟게되어 아쉽게 생각한다. 버릴 부분은 확실히 버린 뒤 챙겨갈 것들을 잘 고민해봐야겠다.
- `야호`: 첫 협업이라 그런지 처음에 생각하지 못했던 부분에서 함께 논의하면 좋았겠다 싶기도 했다. 이번 경험을 기억하고 다음에는 조금 더 능숙하게 이야기를 나누어 보고 싶다.

### 2022-05-30

#### 느낀점

- `매트`: 야호가 **찰떡**같이 설명을 알아 들어서 지식 공유하는 시간이 재미있었다. 오랜만에 인증과 관련된 기능을 개발하게 되어 이전에 학습한 부분을 다시 한번 복습할 수 있어서 `유익한 시간`이었다.
- `야호`: token 부분을 처음 해봐서 걱정이 많았는데 매트가 설명을 잘해줘서 전체적인 흐름을 이해할 수 있었다. 생각보다 어렵지 않은 것 같아 다행이다!

#### 페어에게 좋았던 점

- `매트`: 가끔 날조를 하지만 참아줄 수 있는 정도이기 때문에 괜찮다 ㅎㅎ. 또한 스크롤 이상하게 한다고 하루종일 웃고 있지만 웃는 사람 얼굴에 침을 못 뱉기 때문에 재미있게 페어를 할 수 있었다. 또 야호는 눈이 매우 좋은 것 같다. 코드의 font size가 작아서 한 눈에 많은 코드를 담을 수 있었다 😃
- `야호`: 잘 모르는 개념을 차근차근 설명해주고, 이후에도 계속 이해가 안되는 부분이 없는지 물어봐 줘서 고마웠다. **개떡**같이 알아 들었다고 했지만 나는 괜찮다 🥲 추가로 스크롤을 이상하게 하는 편이지만 나름 신기하고 재미있었다. 매트는 눈이 조금 안좋은 것 같다. 그래서 나에게 코드 font size 를 늘려달라고 했는데, 한눈에 들어오는 코드는 적지만 아~~주 잘 보이고 좋았다.

#### 아쉬웠던 점

- `매트`: 반복되는 테스트 데이터를 Fixture로 만들고 싶었지만 아직 프론트와 회의가 진행되지 않았기 때문에 함부로 건들지 못해서 조금은 불안정한 상태에서 하루를 마무리한 것 같아서 아쉽다.
- `야호`: 아직 프론트와 이야기가 끝나지 않아서 도메인이나 request 값에 대한 validate를 진행하지 못한게 아쉽다. 내일 회의가 끝나고 나서 빨리 수정하고 싶다!

### 2022-05-31

#### 느낀점

- `매트`: 오늘 프론트 분들과 처음으로 오프라인 회의를 진행했는데 다양한 고민들을 충분한 대화를 통해 접점을 찾을 수 있었어 매우 유익한 시간이었다. 그리고 잠실은 뭔가 포근한 분위기 때문에 공부에 집중이 안된다.
- `야호`: 잠실은 약간 놀러가는 분위기가 있는 것 같다… 잠실에서는 너무 하기 싫고 귀찮았는데 게더에서 마무리까지 끝내버렸다!! 프론트와 협업 미션을 시작하고 처음으로 회의를 했는데, 생각보다 얘기할게 없는 것 같으면서도 생각치 못한 부분에서 얘기할 내용이 있었다.

#### 페어에게 좋았던 점

- `매트`: 이해하지 못한 부분에서는 적절한 질문을 통해 지속적인 지식의 싱크를 맞출 수 있었다. 또한 다소 주관적인 부분에 대해서도 충분히 경청해주며 다양한 생각을 나눌 수 있어서 페어 하는 내내 존중받는 기분이 들었다.
- `야호`: 오늘도 역시나 중간중간 내가 잘 따라오고 있는지 물어보면서 진행 상황을 확인해줘서 고마웠다 🙂 덕분에 jjwt 에 변경 사항이 있어 조금 긴장했지만, 수월하게 해결할 수 있었다. 매트는 아는게 많아서 내가 이것 저것 질문해도 대답을 잘 해줬다! 그래서 매트의 아고라가 굉장히 기대된다!!

#### 아쉬웠던 점

- `매트`: 이번 미션 에서는 하나의 애플리케이션을 함께 개발하는 것이 아니라 명세만 공유하고 협업을 진행하기 때문에 팀원 들과 같이 개발하는 듯한 느낌이 적게 들었다. 또한 반복되는 테스트 코드가 다소 지겹게 느껴졌는데 이걸 재밌게 하는 방법이 뭐가 있을까 고민이다.
- `야호`: 잠실의 기운으로 오늘 컨디션이 좋지 않았던 점… 그래도 다 끝내서 개운하다! 또 개발을 하는데 있어서 레거시가 너무 귀찮았다… 레거시가 없는 회사를 가고싶은데 그러면 내가 처음부터 다 만드는 스타트업일까..? 그건  싫다 ^0^ 전 기수분들은 왜 저렇게 만든걸까..?
- 프론트와 대화할 때 백엔드는 객체간의 상호 작용이나 데이터 관리 측면에서 생각을 하는 반면 프론트는 UX 를 중점으로 생각한다는 것을 느꼈다. 단순히 말로 설명하는게 아니라 서로의 코드를 보며 이야기를 나누어 봤으면 어땠을까? 라는 생각이 들었다. 우리가 코드의 가독성을  생각하는 이유는 백엔드 끼리만을 위해서가 아니라 프론트와의 대화를 위해서도 있을지도?! + 인수테스트 시나리오를 보여주며 소통할 수 있지 않았을까..?
